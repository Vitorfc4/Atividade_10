{% extends "base.html" %}
{% block title %}Lista de Usuários{% endblock %}
{% block content %}
  <h2>Usuários</h2>

  <form method="get" action="{{ url_for('users_page') }}">
    <input type="search" name="q" value="{{ q or '' }}" placeholder="buscar por nome ou email">
    <button type="submit">Buscar</button>
  </form>

  <table>
    <thead>
      <tr><th>ID</th><th>Nome</th><th>Email</th><th style="width:180px;">Ações</th></tr>
    </thead>
    <tbody>
      {% for u in users %}
        <tr>
          <td>{{ u.id }}</td>
          <td>{{ u.nome }}</td>
          <td>{{ u.email }}</td>
          <td>
            <a href="{{ url_for('users_edit_form', user_id=u.id) }}">Editar</a>
            |
            <form class="inline" method="post" action="{{ url_for('users_delete', user_id=u.id) }}" onsubmit="return confirm('Excluir usuário {{ u.id }}?');" style="display:inline;">
              <button type="submit">Excluir</button>
            </form>
          </td>
        </tr>
      {% else %}
        <tr><td colspan="4">Nenhum usuário encontrado.</td></tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
